<div class="screen-diff b-island tab-content-fill" pane-set>
    <div class="pane_col" pane pane-expanded="ctrl.isState('screenDiff')">
        <div class="pane_overlay clickable" ui-sref="screenDiff.testcase"></div>
        <div class="pane_content">
            <div class="b-island__title">
                Screenshot suites
            </div>
            <div class="pane__header">
                <h3>
                    Test suites: {{ctrl.list.items.length}}
                </h3>
            </div>
            <div>
                <table allure-table class="test-list table table-hover table-condensed" sorting="ctrl.sorting">
                    <tbody ng-repeat="testsuite in ctrl.list.items">
                        <tr class="testsuite-row clickable" ng-click="testsuite.$expanded = !testsuite.$expanded">
                            <td allure-table-col="{heading:'Title', predicate: 'title', flex: 6}" class="line-ellipsis" title="{{testsuite.title}}">
                                <span class="fa fa-plus"></span>
                                {{testsuite.title}}
                            </td>
                            <td allure-table-col="{heading: 'Failed', predicate: 'statistic.failed', class:'text-center', reverse: true}" class="text-center">
                                <span class="text-danger" ng-show="testsuite.failed > 0">{{testsuite.failed}}</span>
                            </td>
                            <td allure-table-col="{heading: 'Total', predicate: 'statistic.total', class:'text-center', reverse: true}" class="text-center">
                                {{testsuite.statistic.total}}
                            </td>
                        </tr>
                        <tr ng-if="testsuite.$expanded" ng-repeat="testcase in testsuite.testCases" class="clickable screen-diff__testcases"
                            ng-class="{active: ctrl.testcase == testcase}"
                            ng-click="ctrl.selectTestcase(testcase)">
                            <td>{{testcase.title}}</td>
                            <td colspan="2" class="text-right">
                                <span class="label label-status-{{testcase.status | lowercase}}">{{testcase.status | translate}}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div ng-if="ctrl.testcase" class="pane_col" pane pane-expanded="ctrl.isState('screenDiff.testcase.expanded')">
        <div class="pane_overlay clickable" ui-sref="screenDiff.testcase"></div>
        <div class="pane_content">
            <div class="b-island__title">
                Test case
            </div>
            <div class="pane__header">
                <h3>
                    <div class="pane__header_controls pull-right">
                        <span class="fa fa-expand clickable" tooltip="{{'tooltip.EXPAND' | translate}}" ng-hide="ctrl.isState('screenDiff.testcase.expanded')" ui-sref="screenDiff.testcase.expanded"></span>
                        <span class="fa fa-compress clickable" tooltip="{{'tooltip.COLLAPSE' | translate}}" ng-show="ctrl.isState('screenDiff.testcase.expanded')" ui-sref="screenDiff.testcase"></span>
                        <span class="fa fa-close clickable" tooltip="{{'tooltip.CLOSE' | translate}}" ui-sref="screenDiff"></span>
                    </div>
                    <span class="icon-status-{{ctrl.testcase.status | lowercase}}"></span>
                    {{ctrl.testcase.title}}
                </h3>
            </div>
            <ng-include src="'plugins/screenDiff/testcase.html'" ng-controller="ScreenDiffTestcaseController"></ng-include>
        </div>
    </div>
</div>
